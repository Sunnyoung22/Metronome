# EVAN'S METRONOME - 用户手册
欢迎使用 EVAN'S METRONOME，一个功能丰富的网页节拍器，旨在帮助您精确练习。

## 界面概览

打开应用后，您会看到以下主要区域：

1.  **标题区域**: 显示应用名称和标语。
2.  **节拍显示**:
    *   **视觉节拍器 (Visual Beat)**: 一个圆形指示器，会在每个节拍（非静音）时闪烁。
    *   **节拍计数 (Beat Count)**: 在视觉节拍器内显示当前的节拍数（例如，4/4 拍的第一拍显示 "1"）。
    *   **速度显示 (Tempo Display)**: 以 BPM (Beats Per Minute) 为单位显示当前速度。
    *   **速度术语 (Tempo Text)**: 显示与当前 BPM 对应的传统音乐速度术语（如 *Adagio*, *Allegro*）。
3.  **控制区域**: 包含所有用于调整节拍器设置的控件。
4.  **页脚**: 版权信息和键盘快捷键提示。

## 核心功能

*   **启动/停止 (Start/Stop)**:
    *   点击 **▶ Start** 按钮启动节拍器。
    *   启动后，按钮变为 **❚❚ Stop**。点击此按钮停止节拍器。
    *   视觉节拍器会开始闪烁，并播放声音（如果音量 > 0 且节拍未静音）。

## 速度控制 (Tempo Controls)

您可以多种方式设置速度：

1.  **滑块 (Tempo Slider)**: 拖动滑块可在 30 到 250 BPM 之间快速调整速度。
2.  **数字输入 (Tempo Input)**: 直接在标有 "Tempo (BPM)" 的数字框中输入所需的速度值 (30-250)，然后按 Enter 或点击页面其他地方确认。
3.  **+/- 按钮**: 点击速度输入框旁边的 **+** 或 **-** 按钮，可将速度增加或减少 1 BPM。
4.  **常用速度 (Common Tempos)**: 点击标有 "Common" 的下拉菜单，选择一个预设的常用速度（如 *Adagio (76)*）。选择后，速度会自动更新。
5.  **Tap Tempo**:
    *   点击 **Tap Tempo** 按钮至少两次，应用会根据您点击的间隔计算并设置速度。
    *   连续点击多次（最多 5 次）会得到更准确的结果。
    *   如果两次点击间隔超过 2 秒，计算将重置。
    *   *注意*: 当“自动速度/练习”模式运行时，Tap Tempo 功能不可用。

## 节奏与声音 (Rhythm & Sound)

*   **拍号 (Time Sig.)**: 点击标有 "Time Sig." 的下拉菜单，选择所需的拍号（如 2/4, 3/4, 4/4, 6/8 等）。这将决定每小节的拍数，并影响“重音模式”中显示的节拍数量。
*   **音色 (Sound)**: 点击 "Classic", "Wood", 或 "Digital" 按钮选择节拍器的声音。当前选中的音色会高亮显示。
*   **音量 (Volume)**: 拖动标有 "Volume" 的滑块调整节拍器的音量。最左侧为静音，最右侧为最大音量。

## 重音模式 (Accent Pattern)

此功能允许您为每小节中的每个节拍设置不同的强调状态（重音、普通音、静音）。

1.  **启用/禁用**: 点击 "Accent Pattern (A/N/M)" 左侧的开关按钮来显示或隐藏节拍选择器。开关打开时，界面会展开显示节拍按钮；关闭时则隐藏，使界面更紧凑。
2.  **设置模式**:
    *   当开关打开时，会根据您选择的“拍号”显示对应数量的方块按钮。
    *   每个方块代表一拍。方块上显示的字母代表当前状态：
        *   **A**: Accent (重音) - 通常是强拍，声音更响亮。
        *   **N**: Normal (普通) - 普通节拍声音。
        *   **M**: Mute (静音) - 这一拍将不发声，视觉节拍器也不会闪烁。
    *   **点击方块**可以在 A -> N -> M -> A 之间循环切换该节拍的状态。
    *   默认情况下，第一拍是重音 (A)，其余拍是普通音 (N)。您可以根据需要自定义。

## 自动速度 / 练习模式 (Auto Tempo / Practice)

此模式允许您设置一个自动改变速度的练习计划。

1.  **启用/禁用**: 点击 "Auto Tempo / Practice" 左侧的开关按钮来启用或禁用此模式。开关打开时，会显示下方的设置选项；关闭时则隐藏。
2.  **设置**:
    *   **Start**: 练习开始时的速度 (BPM)。
    *   **End**: 练习结束时的目标速度 (BPM)。
    *   **Inc.**: 速度增加（或减少，如果为负数）的量 (BPM)。
    *   **Every (Measures)**: 每隔多少个**小节**，速度增加（或减少）一次。
3.  **使用**:
    *   启用开关并设置好参数后，点击 **▶ Start** 按钮。
    *   节拍器将从 `Start` 速度开始。
    *   每过 `Every` 个小节，速度会自动增加（或减少）`Inc.` BPM。
    *   这个过程会持续进行，直到速度达到或超过 `End` 速度，此时节拍器会自动停止。
    *   *注意*: 在此模式运行时，手动调整速度的控件（滑块、输入框、+/-、Tap、Common）会被禁用。您需要先 **❚❚ Stop** 才能重新调整主速度或练习模式参数。
    *   如果设置的 `Start` 速度已经等于或超过（对于正增量）/等于或低于（对于负增量） `End` 速度，或者 `Inc.` 为 0，模式将不会启动，并会自动禁用开关。

## 状态持久化 (State Persistence)

*   应用会自动使用浏览器的 `localStorage` 功能保存您当前的设置。
*   保存的设置包括：速度 (Tempo)、音量 (Volume)、拍号 (Time Signature)、音色 (Sound Type)、重音模式的具体设置 (Accent Pattern)、重音模式开关状态、练习模式开关状态以及练习模式的各项参数 (Start, End, Inc., Every)。
*   当您下次打开这个节拍器页面时，它会自动加载并恢复您上次关闭时的所有设置。

## 键盘快捷键 (Keyboard Shortcuts)

*   **Space (空格键)**: 启动 / 停止节拍器。
*   **T**: 触发 Tap Tempo。
*   **1**: 选择 "Classic" 音色。
*   **2**: 选择 "Wood" 音色。
*   **3**: 选择 "Digital" 音色。
*   **↑ / → (上/右箭头)**: 速度增加 1 BPM。
*   **↓ / ← (下/左箭头)**: 速度减少 1 BPM。

*注意*: 当输入框或下拉菜单处于激活（聚焦）状态时，键盘快捷键可能无效。

## 注意事项

*   本应用需要支持 Web Audio API 的现代浏览器（如 Chrome, Firefox, Safari, Edge 等）。
*   由于浏览器自动播放策略，首次加载页面后，您可能需要先点击一下页面（例如点击 Start/Stop 按钮或 Tap Tempo）才能听到声音。