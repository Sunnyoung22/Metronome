# EVAN'S METRONOME - 用户手册

欢迎使用 EVAN'S METRONOME，一个功能丰富、高度可定制的网页节拍器，旨在帮助您进行精确、高效的音乐练习。

## 界面概览

打开应用后，您会看到以下主要区域：

1.  **标题区域**: 显示应用名称、标语，以及主题切换和赞助按钮。
2.  **节拍显示**:
    * **视觉节拍器 (Visual Beat)**: 一个圆形指示器，会在每个节拍（非静音）时激活。
    * **节拍计数 (Beat Count)**: 在视觉节拍器内显示当前的节拍数（例如，4/4 拍的第一拍显示 "1"）。
    * **速度显示 (Tempo Display)**: 以 BPM (Beats Per Minute) 为单位显示当前速度。
    * **速度术语 (Tempo Text)**: 显示与当前 BPM 对应的传统音乐速度术语（如 *Adagio*, *Allegro*）。
3.  **控制区域**: 包含所有用于调整节拍器设置的控件。
4.  **页脚**: 版权信息、语言切换和键盘快捷键提示。

## 核心功能

* **启动/停止 (Start/Stop)**:
    * 点击 **▶ Start** 按钮启动节拍器。
    * 启动后，按钮变为 **❚❚ Stop**。点击此按钮停止节拍器。
    * 视觉节拍器会开始激活，并播放声音（如果音量 > 0 且节拍未静音）。

## 速度控制 (Tempo Controls)

您可以多种方式设置速度：

1.  **滑块 (Tempo Slider)**: 拖动滑块可在 30 到 250 BPM 之间快速调整速度。
2.  **数字输入 (Tempo Input)**: 直接在标有 "Tempo (BPM)" 的数字框中输入所需的速度值 (30-250)，然后按 Enter 或点击页面其他地方确认。
3.  **+/- 按钮**: 点击速度输入框旁边的 **+** 或 **-** 按钮，可将速度增加或减少 1 BPM。
4.  **常用速度 (Common Tempos)**: 点击标有 "Common" 的下拉菜单，选择一个预设的常用速度（如 *Adagio (76)*）。选择后，速度会自动更新。
5.  **Tap Tempo**:
    * 点击 **Tap Tempo** 按钮至少两次，应用会根据您点击的间隔计算并设置速度。
    * 连续点击多次会得到更准确的结果。
    * 如果两次点击间隔超过 2 秒，计算将重置。
    * *注意*: 当“自动速度/练习”模式运行时，Tap Tempo 功能不可用。

## 节奏与声音 (Rhythm & Sound)

* **拍号 (Time Sig.)**: 点击标有 "Time Sig." 的下拉菜单，选择所需的拍号（如 2/4, 3/4, 4/4, 6/8 等）。这将决定每小节的拍数，并影响“重音模式”中显示的节拍数量。
* **音色 (Sound)**: 点击 "Classic", "Wood", 或 "Digital" 按钮选择节拍器的声音。当前选中的音色会高亮显示。
* **音量 (Volume)**: 拖动标有 "Volume" 的滑块调整节拍器的音量。最左侧为静音，最右侧为最大音量。

## 重音模式 (Accent Pattern)

此功能允许您为每小节中的每个节拍设置不同的强调状态（重音、普通音、静音）。

1.  **启用/禁用**: 点击 "Accent Pattern (A/N/M)" 左侧的开关按钮来显示或隐藏节拍选择器。
2.  **设置模式**:
    * 当开关打开时，会根据您选择的“拍号”显示对应数量的方块按钮。
    * 每个方块代表一拍。方块上显示的字母代表当前状态：
        * **A**: Accent (重音) - 通常是强拍，声音更响亮。
        * **N**: Normal (普通) - 普通节拍声音。
        * **M**: Mute (静音) - 这一拍将不发声，但视觉节拍器依然会以较暗的方式激活，以提供视觉反馈。
    * **点击方块**可以在 A -> N -> M -> A 之间循环切换该节拍的状态。
    * 默认情况下，第一拍是重音 (A)，其余拍是普通音 (N)。您可以根据需要自定义。

## 自动速度 / 练习模式 (Auto Tempo / Practice)

此高级功能提供两种自动化练习模式，帮助您进行结构化训练。

1.  **启用/禁用**: 点击 "Auto Tempo / Practice" 左侧的开关按钮来启用或禁用此功能。开关打开时，会显示下方的设置选项。

2.  **模式选择 (Mode)**:
    * 启用后，首先您会看到一个“模式”下拉菜单。
    * **Auto Tempo Increase (自动速度递增)**: 在练习过程中自动提升速度。
    * **Mute Measures (小节静音)**: 在练习过程中交替播放和静音，锻炼您的内在节奏感。

### 模式一：自动速度递增 (Auto Tempo Increase)

此模式允许您设置一个自动改变速度的练习计划。

* **设置**:
    * **Start**: 练习开始时的速度 (BPM)。
    * **End**: 练习结束时的目标速度 (BPM)。
    * **Inc.**: 速度增加（或减少，如果为负数）的量 (BPM)。
    * **Every (Measures)**: 每隔多少个**小节**，速度增加（或减少）一次。
* **使用**:
    * 设置好参数后，点击 **▶ Start** 按钮。
    * 节拍器将从 `Start` 速度开始。每过 `Every` 个小节，速度会自动增加（或减少）`Inc.` BPM。
    * 这个过程会持续进行，直到速度达到或超过 `End` 速度。

### 模式二：小节静音 (Mute Measures)

此模式通过周期性地静音来挑战您的节奏稳定性。

* **设置**:
    * **Play for (Measures)**: 节拍器正常发声的小节数。
    * **Mute for (Measures)**: 紧接着，节拍器进入静音的小节数。
* **使用**:
    * 设置好参数后，点击 **▶ Start** 按钮。
    * 节拍器会先正常播放 `Play for` 所设定的的小节数，然后自动静音 `Mute for` 所设定的小节数。此过程会无限循环。
    * 在静音小节期间，节拍器**不发声**，但**视觉节拍器会以较暗的“静音”状态继续显示节拍**，为您提供视觉参考。

**注意**:
* 在“自动速度/练习”模式运行时，所有手动的速度控制（滑块、输入框、+/-、Tap、Common）都会被禁用。您需要先点击 **❚❚ Stop** 才能重新调整主速度或练习模式参数。
* 如果您在“自动速度递增”模式下设置的参数不合理（例如起始速度已高于结束速度，或增量为0），模式将不会启动，并会自动禁用开关。
* 您可以在练习开始前随时切换两种练习模式。

## 状态持久化 (State Persistence)

* 应用会自动使用浏览器的 `localStorage` 功能保存您当前的绝大部分设置。
* 保存的设置包括：速度 (Tempo)、音量 (Volume)、拍号 (Time Signature)、音色 (Sound Type)、多语言选择 (Language)、主题偏好 (Theme)、重音模式的具体设置 (Accent Pattern)、以及练习模式的各项参数。
* 当您下次打开这个节拍器页面时，它会自动加载并恢复您上次关闭时的所有设置，方便您继续练习。

## 键盘快捷键 (Keyboard Shortcuts)

* **Space (空格键)**: 启动 / 停止节拍器。
* **T**: 触发 Tap Tempo。
* **1**: 选择 "Classic" 音色。
* **2**: 选择 "Wood" 音色。
* **3**: 选择 "Digital" 音色。
* **↑ / → (上/右箭头)**: 速度增加 1 BPM。
* **↓ / ← (下/左箭头)**: 速度减少 1 BPM。

*注意*: 当输入框或下拉菜单处于激活（聚焦）状态时，为防止冲突，键盘快捷键可能无效。

## 注意事项

* 本应用需要支持 Web Audio API 的现代浏览器（如 Chrome, Firefox, Safari, Edge 等）。
* 由于浏览器的自动播放策略，首次加载页面后，您可能需要先与页面进行一次交互（例如点击任意按钮）才能听到声音。
